<div class="login-bg">
  <div class="login-card">
    <!-- Logo with same design as navbar -->
    <div class="brand">
      <img class="brand-logo" src="assets/logo.png" alt="Cylinex logo" />
    </div>
    <form (ngSubmit)="onLogin()" autocomplete="off">
      <div class="login-header">
        <div class="login-title">Sign in</div>
        <div class="login-subtitle">Your Agency, One Unified Platform</div>
      </div>
      <div class="form-field">
        <label class="form-label" for="login-username">Username</label>
        <div class="input-wrapper">
          <span class="input-icon"><fa-icon [icon]="faUser"></fa-icon></span>
          <input
            id="login-username"
            class="form-input"
            type="text"
            [(ngModel)]="username"
            name="username"
            placeholder="Enter username"
            required
          />
        </div>
      </div>
      <div class="form-field">
        <label class="form-label" for="login-password">Password</label>
        <div class="input-wrapper">
          <span class="input-icon"><fa-icon [icon]="faLock"></fa-icon></span>
          <input
            id="login-password"
            class="form-input"
            [type]="showPassword ? 'text' : 'password'"
            [(ngModel)]="password"
            name="password"
            placeholder="Enter password"
            required
          />
          <button
            type="button"
            class="password-toggle"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
            [attr.aria-pressed]="showPassword"
          >
            <fa-icon [icon]="showPassword ? faEyeSlash : faEye"></fa-icon>
          </button>
        </div>
      </div>
      <button class="login-btn" type="submit" [disabled]="loading">
        <span *ngIf="!loading">Login</span>
        <span *ngIf="loading" class="spinner"></span>
      </button>
      <div class="login-links">
        <a>Forgot password?</a>
      </div>
      <!-- Error div removed as Toastr will handle error messages -->
    </form>
    <div class="modal-backdrop" *ngIf="showForgot">
      <div class="modal">
        <div class="modal-title">Reset Password</div>
        <form (ngSubmit)="onForgotPassword()">
          <input type="email" [(ngModel)]="forgotEmail" name="forgotEmail" placeholder="Enter your email" required />
          <button type="submit" [disabled]="forgotLoading">
            <span *ngIf="!forgotLoading">Send Reset Link</span>
            <span *ngIf="forgotLoading" class="spinner"></span>
          </button>
        </form>
        <div *ngIf="forgotMsg" class="forgot-msg">{{ forgotMsg }}</div>
        <button class="modal-close" (click)="closeForgotPassword()">&times;</button>
      </div>
    </div>
  </div>
</div>
